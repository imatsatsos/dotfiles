#!/usr/bin/env sh
#
# Rofi menu to prompt a message and get a yes/no answer.

# import config
[ -e "$HOME"/.local/bin/menus.conf ] && . "$HOME/.local/bin/menus.conf"
menu=${menu:-dmenu}

yes='Do as I say'
no='Cancel'
query='Are you sure?'
theme='theme_confirm.rasi'

while [ $# -ne 0 ]; do
    case "$1" in
        -y | --yes)
            [ -n "$2" ] && yes="$2" || yes=''
            shift
            ;;

        -n | --no)
            [ -n "$2" ] && no="$2" || no=''
            shift
            ;;

        -q | --query)
            [ -n "$2" ] && query="$2"
            shift
            ;;
        -t | --theme)
            [ -n "$2" ] && theme="$2"
            shift
            ;;
    esac
    shift
done

case $menu in
	"rofi") chosen=$(printf "%s\n%s" "$no" "$yes" | rofi -dmenu -p "$query" -no-fixed-num-lines -theme "$theme"  -selected-row 1) ;;
	*) chosen=$(printf "%s\n%s" "$no" "$yes" | dmenu -i -p "$query" $dmenu_args -c -h 40 -l 2) ;;
esac

case "$chosen" in
    "$yes") exit 0 ;;
    *)      exit 1 ;;
esac

