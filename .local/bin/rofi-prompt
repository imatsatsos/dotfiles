#!/usr/bin/env sh
#
# Rofi powered menu to prompt a message and get a yes/no answer.
# Uses: rofi

yes='Confirm'
no='Cancel'
query='Are you sure?'
theme='confirm.rasi'

while [ $# -ne 0 ]; do
    case "$1" in
        -y | --yes)
            [ -n "$2" ] && yes="$2" || yes=''
            shift
            ;;

        -n | --no)
            [ -n "$2" ] && no="$2" || no=''
            shift
            ;;

        -q | --query)
            [ -n "$2" ] && query="$2"
            shift
            ;;
        -t | --theme)
            [ -n "$2" ] && theme="$2"
            shift
            ;;
    esac
    shift
done

#| rofi -theme-str '@import "prompt.rasi"' \
chosen=$(printf '%s;%s\n' "$yes" "$no" \
    | rofi -no-default-config \
           -theme $theme \
           -p "$query" \
           -dmenu \
           -sep ';' \
           -a 0 \
           -u 1 \
           -selected-row 1)

case "$chosen" in
    "$yes") exit 0 ;;
    *)      exit 1 ;;
esac

