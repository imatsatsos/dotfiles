#!/bin/env sh
# Outputs current active keyboard layout
# Sends a notification if called with "notify"
layout=$(xset -q | grep -A 0 'LED' | cut -c59-67)

[ -z "$layout" ] && exit

if [ "$layout" = "00000000" ] || [ "$layout" = "00000002" ]; then
    output="EN"
    echo "EN "
else
    output="GR"
    if [ -z "$border" ]; then
      echo "GR "
    else
      echo "<span bgcolor='#5a84bc' fgcolor='#ffffff'> GR </span>"
    fi
fi

if [ "$1" = "notify" ];then 
  case $output in
    "EN")
      dunstify -a "Layout" "󰌌   $output " "| English (US)" -t 1000 -r 231 ;;
    "GR")
      dunstify -a "Layout" "󰌌   $output " "| Ελληνικά" -t 1000 -r 231 ;;
  esac
fi
