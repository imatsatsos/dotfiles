#!/bin/env sh
# Outputs current active keyboard layout
# Sends a notification if called with "notify"

[ -e "$HOME/.local/bin/status/sbcol" ] && . "$HOME"/.local/bin/status/sbcol

layout=$(xset -q | grep -A 0 'LED' | cut -c60-67)

[ -z "$layout" ] && exit

if [ "$layout" = "00000000" ] || [ "$layout" = "00000002" ]; then
    output="en"
else
    output="gr"
fi

if [ "$1" = "notify" ]; then 
    case $output in
        "en") dunstify -a "Layout" "󰌌  EN " "| English " -t 1000 -r 231 ;;
        "gr") dunstify -a "Layout" "󰌌  GR " "| Ελληνικά" -t 1000 -r 231 ;;
    esac
else 
    display "$output" || echo "$output"
fi
