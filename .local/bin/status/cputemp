#!/bin/env sh
# Outputs current package0 temp in C

# hwmon4-temp1 is cpu pkg temp, but this can change to hwmon5.. name is coretemp.. make a for loop that checks it..
file="/sys/class/hwmon/hwmon4/temp1_input"

# if file doesn't exit, then exit
[ -f "$file" ] || exit

temp=$(cat "$file")
# remove 3 trailing zeros
temp="${temp%???}"

case $BLOCK_BUTTON in
	1) notify-send "CPU hogs" "$(ps axch -o cmd:15,%cpu --sort=-%cpu | head)\\n(100% per core)" ;;
	3) setsid -f "$TERMINAL" -T termfloat -e htop ;;
esac

. "$HOME"/.local/bin/status/sbcol
if [ "$temp" -ge 80 ]; then
  display "$temp°C" "#ff1600"
elif [ "$temp" -ge 72 ]; then
  display "$temp°C" "#ff9600"
else
  display "$temp°C"
fi
