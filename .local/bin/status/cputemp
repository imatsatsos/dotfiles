#!/bin/env sh
# Outputs current package0 temp in C

[ -e "$HOME/.local/bin/status/sbcol" ] && . "$HOME"/.local/bin/status/sbcol

# hwmon4-temp1 is cpu pkg temp, but this can change to hwmon5.. name is coretemp.. make a for loop that checks it..
file="/sys/class/hwmon/hwmon4/temp1_input"

# if file doesn't exit, then exit
[ -e "$file" ] || exit

temp=$(cat "$file")
# remove 3 trailing zeros
temp="${temp%???}"

case $BLOCK_BUTTON in
    1) notify-send "CPU temps" "$(sensors | head -10 | tail -7 | cut -d' ' -f1,2,10)" ;;
    3) setsid -f "$TERMINAL" -T termfloat -e htop & ;;
esac

if [ "$temp" -ge 80 ]; then
    color="#ff1600"
elif [ "$temp" -ge 72 ]; then
    color="#ff9600"
fi

display "$temp°C" "$color" || echo "$temp°C"
